<AntContainer />
<section style="height:calc(100vh - 20px);display:flex;flex-direction:column;">
    <header>
        <Flex Gap="small">
            <EnumSelect Style="width:150px;" AllowClear Placeholder="选择数据库" TEnum="DbBaseType?" @bind-Value="@selectedDb" DropdownMatchSelectWidth="@false"></EnumSelect>
            <Input @bind-Value="@connectstring"></Input>
            <Button Type="primary" OnClick="@Connect">连接</Button>
            <Button Type="primary" OnClick="@Build">生成</Button>
            <Button OnClick="@(()=> showSetting = true)">设置</Button>
        </Flex>
    </header>
    <section style="flex:1;overflow:hidden;display:flex;">
        <aside style="height:100%;width:fit-content;">
            <div style="padding:10px;height:50px;line-height:30px;">
                数据库列表
                <Checkbox OnChange="AllHandle">全选</Checkbox>
            </div>
            <Card Style="height:calc(100% - 50px);overflow-y:auto;width:fit-content;min-width:200px;">
                <ChildContent>
                    <AntList DataSource="@Tables">
                        <ChildContent>
                            <ListItem>
                                <Checkbox @bind-Checked="@context.IsSelected">
                                    @context.TableName
                                </Checkbox>
                            </ListItem>
                        </ChildContent>
                    </AntList>
                </ChildContent>
            </Card>
        </aside>
        <section style="flex:1;height:100%;width:100%;overflow:auto;">
            <Collapse Animation>
                @foreach (var table in Tables)
                {
                    if (string.IsNullOrEmpty(table.GeneratedResult))
                    {
                        continue;
                    }
                    <Panel Header="@table.TableName" Key="@table.TableName">
                        <pre>@table.GeneratedResult</pre>
                    </Panel>
                }
            </Collapse>
        </section>
    </section>
</section>

<Modal @bind-Visible="@showSetting" Width="300">
    <Form Model="Config" LabelColSpan="6">
        <FormItem Label="前缀">
            <Input @bind-Value="@context.Prefix"></Input>
        </FormItem>
        <FormItem Label="分隔符">
            <Input @bind-Value="@context.Separator"></Input>
        </FormItem>
        <FormItem Label="命名空间">
            <Input @bind-Value="@context.Namespace"></Input>
        </FormItem>
    </Form>
</Modal>
